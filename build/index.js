(()=>{"use strict";const e=window.wp.blocks,l=window.wp.data,t=window.wp.blockEditor,s=window.wp.components,n=window.wp.coreData,r=window.wp.i18n,a=window.wp.element,o=window.ReactJSXRuntime;function i(e,l=50){return e.replace(/<[^>]+>/g,"").split(/\s+/).slice(0,l).join(" ")+"..."}function d(e,l=50){return e.replace(/<[^>]+>/g,"").split(/\s+/).slice(0,l).join(" ")+"..."}(0,e.registerBlockType)("lp/latest-posts",{title:"SKM Latest Posts",icon:"list-view",category:"widgets",attributes:{postType:{type:"string",default:"post"},totalPosts:{type:"number",default:3},postsPerPage:{type:"number",default:3},bgColor:{type:"string",default:""},bgSwitch:{type:"boolean",default:!1},bgImage:{type:"string",default:""},postStyle:{type:"string",default:"grid"},columns:{type:"number",default:3}},edit:({attributes:e,setAttributes:d})=>{const{postType:p,postsPerPage:c,totalPosts:m,bgColor:g,bgSwitch:u,bgImage:h,postStyle:x,columns:b}=e,j=(0,l.useSelect)(e=>e("core").getPostTypes({per_page:-1}),[]),[y,_]=(0,a.useState)(1);(0,a.useEffect)(()=>{_(1)},[c,m]);const{records:v,hasResolved:C}=(0,n.useEntityRecords)("postType",p||"post",{per_page:m,_embed:!0}),f=v?.length||0,w=Math.ceil(f/c),k=v?.slice((y-1)*c,y*c)||[],S=u&&h?{backgroundImage:`url(${h})`,backgroundSize:"cover"}:{background:g},P=u&&h?{backgroundImage:`url(${h})`,backgroundSize:"cover",backgroundPosition:"center",height:"80px",marginBottom:"10px",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"12px"}:{display:"none"};return(0,o.jsxs)(a.Fragment,{children:[(0,o.jsxs)(t.InspectorControls,{children:[(0,o.jsxs)(s.PanelBody,{title:(0,r.__)("General","lp"),initialOpen:!0,children:[(0,o.jsx)(s.SelectControl,{label:(0,r.__)("Select Post Type","lp"),value:p,options:j?j.filter(e=>e.viewable&&!["page","media","attachment"].includes(e.slug)).map(e=>({label:e.name,value:e.slug})):[{label:(0,r.__)("Loading...","lp"),value:""}],onChange:e=>d({postType:e})}),(0,o.jsx)(s.RangeControl,{label:(0,r.__)("Total Posts to Load","lp"),value:m,onChange:e=>d({totalPosts:e}),min:1,max:100}),(0,o.jsx)(s.RangeControl,{label:(0,r.__)("Posts Per Page","lp"),value:c,onChange:e=>d({postsPerPage:e}),min:1,max:m})]}),(0,o.jsxs)(s.PanelBody,{title:(0,r.__)("Background Style","lp"),initialOpen:!1,children:[(0,o.jsx)(s.ToggleControl,{label:"Show Background Image",checked:u,onChange:e=>d({bgSwitch:e})}),!u&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{style:{marginBottom:"10px"},children:[(0,o.jsx)("h2",{style:{marginBottom:"5px"},children:"Background Color:"}),(0,o.jsx)("p",{style:{fontSize:"12px",marginBottom:"5px"},children:"Select a background color for the block. If you choose an image, this will be ignored."})]}),(0,o.jsx)(s.ColorPicker,{color:g,onChangeComplete:e=>d({bgColor:e.hex}),disableAlpha:!0})]}),(0,o.jsx)("div",{style:P,children:(0,r.__)("Background Preview","lp")}),u&&(0,o.jsx)(t.MediaUploadCheck,{children:(0,o.jsx)(t.MediaUpload,{onSelect:e=>d({bgImage:e.url}),allowedTypes:["image"],render:({open:e})=>(0,o.jsx)("div",{style:{marginBottom:"10px",width:"100%",textAlign:"center"},children:(0,o.jsx)(s.Button,{onClick:e,variant:"primary",style:{marginTop:"10px",backgroundColor:"rgb(235 82 67)",color:"#fff",borderRadius:"4px"},children:h?"Change Image":"Select Image"})})})})]}),(0,o.jsxs)(s.PanelBody,{title:(0,r.__)("Post Listing Style","lp"),initialOpen:!1,children:[(0,o.jsx)(s.SelectControl,{label:(0,r.__)("Select Layout Style","lp"),value:x,options:[{label:"Grid",value:"grid"},{label:"List",value:"list"},{label:"Masonry",value:"masonry"}],onChange:e=>d({postStyle:e}),help:(0,r.__)("Choose how posts should be displayed.","lp")}),("grid"===x||"masonry"===x)&&(0,o.jsx)(s.RangeControl,{label:(0,r.__)("Number of Columns","lp"),value:b,onChange:e=>d({columns:e}),min:1,max:6,help:(0,r.__)("Choose how many columns to show.","lp")})]})]}),(0,o.jsxs)("div",{className:"lp-preview",style:S,children:[(0,o.jsx)("h3",{children:(0,r.__)("Latest Posts","lp")}),"list"===x&&(0,o.jsx)("ul",{className:"lp-list",children:k.map(e=>{const l=e._embedded?.["wp:featuredmedia"]?.[0]?.source_url;return(0,o.jsxs)("li",{children:[l&&(0,o.jsx)("img",{src:l,alt:e.title.rendered}),(0,o.jsxs)("div",{className:"lp-post-content",children:[(0,o.jsx)("h4",{children:(0,o.jsx)("a",{href:e.link,children:e.title.rendered})}),(0,o.jsx)("div",{className:"excerpt",dangerouslySetInnerHTML:{__html:e?.excerpt?.rendered?.trim()?e.excerpt.rendered:i(e?.content?.rendered||"",50)}}),(0,o.jsx)("a",{href:e.link,className:"lp-read-more",children:(0,r.__)("Read More","lp")})]})]},e.id)})}),"grid"===x&&(0,o.jsx)("div",{className:"lp-grid",style:{padding:"10px",display:"grid",gap:"10px",gridTemplateColumns:`repeat(${b||3}, minmax(0, 1fr))`},children:k.map(e=>{const l=e._embedded?.["wp:featuredmedia"]?.[0]?.source_url;return(0,o.jsxs)("div",{id:e.id,className:"lp-grid-item",children:[l&&(0,o.jsx)("img",{src:l,alt:e.title.rendered}),(0,o.jsx)("h4",{children:e.title.rendered}),(0,o.jsx)("p",{dangerouslySetInnerHTML:{__html:e?.excerpt?.rendered?.trim()?e.excerpt.rendered:i(e?.content?.rendered||"",50)}}),(0,o.jsx)("a",{href:e.link,className:"lp-read-more",children:(0,r.__)("Read More","lp")})]},e.id)})}),"masonry"===x&&(0,o.jsx)("div",{className:"lp-masonry",style:{padding:"10px",columnCount:b||3,columnGap:"10px"},children:k.map(e=>{const l=e._embedded?.["wp:featuredmedia"]?.[0]?.source_url;return(0,o.jsxs)("div",{className:"lp-masonry-item",children:[l&&(0,o.jsx)("img",{src:l,alt:e.title.rendered}),(0,o.jsx)("h4",{children:e.title.rendered}),(0,o.jsx)("p",{dangerouslySetInnerHTML:{__html:e?.excerpt?.rendered?.trim()?e.excerpt.rendered:i(e?.content?.rendered||"",50)}}),(0,o.jsx)("a",{href:e.link,className:"lp-read-more",children:(0,r.__)("Read More","lp")})]},e.id)})}),C&&f>c&&(0,o.jsx)("div",{className:"lp-pagination",children:(()=>{const e=[],l=Math.max(1,y-2),t=Math.min(w,y+2);e.push((0,o.jsx)("button",{className:"lp-page-button nav",onClick:()=>_(y-1),disabled:1===y,children:"« Prev"},"prev")),l>1&&(e.push((0,o.jsx)("button",{className:"lp-page-button",onClick:()=>_(1),children:"1"},1)),l>2&&e.push((0,o.jsx)("span",{className:"lp-ellipsis",children:"..."},"start-ellipsis")));for(let s=l;s<=t;s++)e.push((0,o.jsx)("button",{className:"lp-page-button "+(s===y?"active":""),onClick:()=>_(s),children:s},s));return t<w-1&&e.push((0,o.jsx)("span",{className:"lp-ellipsis",children:"..."},"end-ellipsis")),t<w&&e.push((0,o.jsx)("button",{className:"lp-page-button",onClick:()=>_(w),children:w},w)),e.push((0,o.jsx)("button",{className:"lp-page-button nav",onClick:()=>_(y+1),disabled:y===w,children:"Next »"},"next")),e})()})]})]})},save:()=>null}),(0,e.registerBlockType)("lp/faq",{title:"SKM FAQ",icon:"list-view",category:"widgets",attributes:{faqTitle:{type:"string",default:"Frequently Asked Questions"},faqItems:{type:"array",default:[]},bgColor:{type:"string",default:""},bgSwitch:{type:"boolean",default:!1},bgImage:{type:"string",default:""}},edit:({attributes:e,setAttributes:i})=>{const{postType:p,postsPerPage:c,totalPosts:m,bgColor:g,bgSwitch:u,bgImage:h,postStyle:x,columns:b}=e,j=(0,l.useSelect)(e=>e("core").getPostTypes({per_page:-1}),[]),[y,_]=(0,a.useState)(1);(0,a.useEffect)(()=>{_(1)},[c,m]);const{records:v,hasResolved:C}=(0,n.useEntityRecords)("postType",p||"post",{per_page:m,_embed:!0}),f=v?.length||0,w=Math.ceil(f/c),k=v?.slice((y-1)*c,y*c)||[],S=u&&h?{backgroundImage:`url(${h})`,backgroundSize:"cover"}:{background:g},P=u&&h?{backgroundImage:`url(${h})`,backgroundSize:"cover",backgroundPosition:"center",height:"80px",marginBottom:"10px",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"12px"}:{display:"none"};return(0,o.jsxs)(a.Fragment,{children:[(0,o.jsxs)(t.InspectorControls,{children:[(0,o.jsxs)(s.PanelBody,{title:(0,r.__)("General","lp"),initialOpen:!0,children:[(0,o.jsx)(s.SelectControl,{label:(0,r.__)("Select Post Type","lp"),value:p,options:j?j.filter(e=>e.viewable&&!["page","media","attachment"].includes(e.slug)).map(e=>({label:e.name,value:e.slug})):[{label:(0,r.__)("Loading...","lp"),value:""}],onChange:e=>i({postType:e})}),(0,o.jsx)(s.RangeControl,{label:(0,r.__)("Total Posts to Load","lp"),value:m,onChange:e=>i({totalPosts:e}),min:1,max:100}),(0,o.jsx)(s.RangeControl,{label:(0,r.__)("Posts Per Page","lp"),value:c,onChange:e=>i({postsPerPage:e}),min:1,max:m})]}),(0,o.jsxs)(s.PanelBody,{title:(0,r.__)("Background Style","lp"),initialOpen:!1,children:[(0,o.jsx)(s.ToggleControl,{label:"Show Background Image",checked:u,onChange:e=>i({bgSwitch:e})}),!u&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{style:{marginBottom:"10px"},children:[(0,o.jsx)("h2",{style:{marginBottom:"5px"},children:"Background Color:"}),(0,o.jsx)("p",{style:{fontSize:"12px",marginBottom:"5px"},children:"Select a background color for the block. If you choose an image, this will be ignored."})]}),(0,o.jsx)(s.ColorPicker,{color:g,onChangeComplete:e=>i({bgColor:e.hex}),disableAlpha:!0})]}),(0,o.jsx)("div",{style:P,children:(0,r.__)("Background Preview","lp")}),u&&(0,o.jsx)(t.MediaUploadCheck,{children:(0,o.jsx)(t.MediaUpload,{onSelect:e=>i({bgImage:e.url}),allowedTypes:["image"],render:({open:e})=>(0,o.jsx)("div",{style:{marginBottom:"10px",width:"100%",textAlign:"center"},children:(0,o.jsx)(s.Button,{onClick:e,variant:"primary",style:{marginTop:"10px",backgroundColor:"rgb(235 82 67)",color:"#fff",borderRadius:"4px"},children:h?"Change Image":"Select Image"})})})})]}),(0,o.jsxs)(s.PanelBody,{title:(0,r.__)("Post Listing Style","lp"),initialOpen:!1,children:[(0,o.jsx)(s.SelectControl,{label:(0,r.__)("Select Layout Style","lp"),value:x,options:[{label:"Grid",value:"grid"},{label:"List",value:"list"},{label:"Masonry",value:"masonry"}],onChange:e=>i({postStyle:e}),help:(0,r.__)("Choose how posts should be displayed.","lp")}),("grid"===x||"masonry"===x)&&(0,o.jsx)(s.RangeControl,{label:(0,r.__)("Number of Columns","lp"),value:b,onChange:e=>i({columns:e}),min:1,max:6,help:(0,r.__)("Choose how many columns to show.","lp")})]})]}),(0,o.jsxs)("div",{className:"lp-preview",style:S,children:[(0,o.jsx)("h3",{children:(0,r.__)("Latest Posts","lp")}),"list"===x&&(0,o.jsx)("ul",{className:"lp-list",children:k.map(e=>{const l=e._embedded?.["wp:featuredmedia"]?.[0]?.source_url;return(0,o.jsxs)("li",{children:[l&&(0,o.jsx)("img",{src:l,alt:e.title.rendered}),(0,o.jsxs)("div",{className:"lp-post-content",children:[(0,o.jsx)("h4",{children:(0,o.jsx)("a",{href:e.link,children:e.title.rendered})}),(0,o.jsx)("div",{className:"excerpt",dangerouslySetInnerHTML:{__html:e?.excerpt?.rendered?.trim()?e.excerpt.rendered:d(e?.content?.rendered||"",50)}}),(0,o.jsx)("a",{href:e.link,className:"lp-read-more",children:(0,r.__)("Read More","lp")})]})]},e.id)})}),"grid"===x&&(0,o.jsx)("div",{className:"lp-grid",style:{padding:"10px",display:"grid",gap:"10px",gridTemplateColumns:`repeat(${b||3}, minmax(0, 1fr))`},children:k.map(e=>{const l=e._embedded?.["wp:featuredmedia"]?.[0]?.source_url;return(0,o.jsxs)("div",{id:e.id,className:"lp-grid-item",children:[l&&(0,o.jsx)("img",{src:l,alt:e.title.rendered}),(0,o.jsx)("h4",{children:e.title.rendered}),(0,o.jsx)("p",{dangerouslySetInnerHTML:{__html:e?.excerpt?.rendered?.trim()?e.excerpt.rendered:d(e?.content?.rendered||"",50)}}),(0,o.jsx)("a",{href:e.link,className:"lp-read-more",children:(0,r.__)("Read More","lp")})]},e.id)})}),"masonry"===x&&(0,o.jsx)("div",{className:"lp-masonry",style:{padding:"10px",columnCount:b||3,columnGap:"10px"},children:k.map(e=>{const l=e._embedded?.["wp:featuredmedia"]?.[0]?.source_url;return(0,o.jsxs)("div",{className:"lp-masonry-item",children:[l&&(0,o.jsx)("img",{src:l,alt:e.title.rendered}),(0,o.jsx)("h4",{children:e.title.rendered}),(0,o.jsx)("p",{dangerouslySetInnerHTML:{__html:e?.excerpt?.rendered?.trim()?e.excerpt.rendered:d(e?.content?.rendered||"",50)}}),(0,o.jsx)("a",{href:e.link,className:"lp-read-more",children:(0,r.__)("Read More","lp")})]},e.id)})}),C&&f>c&&(0,o.jsx)("div",{className:"lp-pagination",children:(()=>{const e=[],l=Math.max(1,y-2),t=Math.min(w,y+2);e.push((0,o.jsx)("button",{className:"lp-page-button nav",onClick:()=>_(y-1),disabled:1===y,children:"« Prev"},"prev")),l>1&&(e.push((0,o.jsx)("button",{className:"lp-page-button",onClick:()=>_(1),children:"1"},1)),l>2&&e.push((0,o.jsx)("span",{className:"lp-ellipsis",children:"..."},"start-ellipsis")));for(let s=l;s<=t;s++)e.push((0,o.jsx)("button",{className:"lp-page-button "+(s===y?"active":""),onClick:()=>_(s),children:s},s));return t<w-1&&e.push((0,o.jsx)("span",{className:"lp-ellipsis",children:"..."},"end-ellipsis")),t<w&&e.push((0,o.jsx)("button",{className:"lp-page-button",onClick:()=>_(w),children:w},w)),e.push((0,o.jsx)("button",{className:"lp-page-button nav",onClick:()=>_(y+1),disabled:y===w,children:"Next »"},"next")),e})()})]})]})},save:()=>null})})();