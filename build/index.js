(()=>{"use strict";const e=window.wp.blocks,l=window.wp.data,t=window.wp.blockEditor,s=window.wp.components,n=window.wp.primitives,r=window.ReactJSXRuntime,a=(0,r.jsx)(n.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,r.jsx)(n.Path,{d:"M13 5.5H4V4h9v1.5Zm7 7H4V11h16v1.5Zm-7 7H4V18h9v1.5Z"})}),o=(0,r.jsx)(n.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,r.jsx)(n.Path,{d:"M7.5 5.5h9V4h-9v1.5Zm-3.5 7h16V11H4v1.5Zm3.5 7h9V18h-9v1.5Z"})}),i=(0,r.jsx)(n.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,r.jsx)(n.Path,{d:"M11.111 5.5H20V4h-8.889v1.5ZM4 12.5h16V11H4v1.5Zm7.111 7H20V18h-8.889v1.5Z"})}),d=(0,r.jsx)(n.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,r.jsx)(n.Path,{d:"M4 12.8h16v-1.5H4v1.5zm0 7h12.4v-1.5H4v1.5zM4 4.3v1.5h16V4.3H4z"})}),c=window.wp.i18n,p=window.wp.element,h=window.wp.coreData;function g(e,l=50){return e.replace(/<[^>]+>/g,"").split(/\s+/).slice(0,l).join(" ")+"..."}function m({attributes:e,allPosts:l,hasResolved:t,currentPage:s,setCurrentPage:n}){const{postsPerPage:a,bgColor:o,bgSwitch:i,bgImage:d,postStyle:p,columns:h,scHedSwitch:m,scHedText:u,scHedAlign:x,scHedFntSize:j,scHedFntColor:b}=e,y=l?.length||0,_=Math.ceil(y/a),f=l?.slice((s-1)*a,s*a)||[],v=i&&d?{backgroundImage:`url(${d})`,backgroundSize:"cover"}:{background:o};return(0,r.jsxs)("div",{className:"lp-preview",style:v,children:[m&&(0,r.jsx)("div",{className:"lp-posts-header",style:{textAlign:x},children:(0,r.jsx)("h3",{style:{fontSize:`${j}px`,color:b},children:(0,c.__)(u,"lp")})}),"list"===p&&(0,r.jsx)("ul",{className:"lp-list",children:f.map(e=>{const l=e._embedded?.["wp:featuredmedia"]?.[0]?.source_url;return(0,r.jsxs)("li",{children:[l&&(0,r.jsx)("img",{src:l,alt:e.title.rendered}),(0,r.jsxs)("div",{className:"lp-post-content",children:[(0,r.jsx)("h4",{children:(0,r.jsx)("a",{href:e.link,children:e.title.rendered})}),(0,r.jsx)("div",{className:"excerpt",dangerouslySetInnerHTML:{__html:e?.excerpt?.rendered?.trim()?e.excerpt.rendered:g(e?.content?.rendered||"",50)}}),(0,r.jsx)("a",{href:e.link,className:"lp-read-more",children:(0,c.__)("Read More","lp")})]})]},e.id)})}),"grid"===p&&(0,r.jsx)("div",{className:"lp-grid",style:{padding:"10px",display:"grid",gap:"10px",gridTemplateColumns:`repeat(${h||3}, minmax(0, 1fr))`},children:f.map(e=>{const l=e._embedded?.["wp:featuredmedia"]?.[0]?.source_url;return(0,r.jsxs)("div",{id:e.id,className:"lp-grid-item",children:[l&&(0,r.jsx)("img",{src:l,alt:e.title.rendered}),(0,r.jsx)("h4",{children:e.title.rendered}),(0,r.jsx)("p",{dangerouslySetInnerHTML:{__html:e?.excerpt?.rendered?.trim()?e.excerpt.rendered:g(e?.content?.rendered||"",50)}}),(0,r.jsx)("a",{href:e.link,className:"lp-read-more",children:(0,c.__)("Read More","lp")})]},e.id)})}),"masonry"===p&&(0,r.jsx)("div",{className:"lp-masonry",style:{padding:"10px",columnCount:h||3,columnGap:"10px"},children:f.map(e=>{const l=e._embedded?.["wp:featuredmedia"]?.[0]?.source_url;return(0,r.jsxs)("div",{className:"lp-masonry-item",children:[l&&(0,r.jsx)("img",{src:l,alt:e.title.rendered}),(0,r.jsx)("h4",{children:e.title.rendered}),(0,r.jsx)("p",{dangerouslySetInnerHTML:{__html:e?.excerpt?.rendered?.trim()?e.excerpt.rendered:g(e?.content?.rendered||"",50)}}),(0,r.jsx)("a",{href:e.link,className:"lp-read-more",children:(0,c.__)("Read More","lp")})]},e.id)})}),t&&y>a&&(0,r.jsx)("div",{className:"lp-pagination",children:(()=>{const e=[],l=Math.max(1,s-2),t=Math.min(_,s+2);e.push((0,r.jsx)("button",{className:"lp-page-button nav",onClick:()=>n(s-1),disabled:1===s,children:"« Prev"},"prev")),l>1&&(e.push((0,r.jsx)("button",{onClick:()=>n(1),className:"lp-page-button",children:"1"},1)),l>2&&e.push((0,r.jsx)("span",{className:"lp-ellipsis",children:"..."},"start-ellipsis")));for(let a=l;a<=t;a++)e.push((0,r.jsx)("button",{className:"lp-page-button "+(a===s?"active":""),onClick:()=>n(a),children:a},a));return t<_-1&&e.push((0,r.jsx)("span",{className:"lp-ellipsis",children:"..."},"end-ellipsis")),t<_&&e.push((0,r.jsx)("button",{className:"lp-page-button",onClick:()=>n(_),children:_},_)),e.push((0,r.jsx)("button",{className:"lp-page-button nav",onClick:()=>n(s+1),disabled:s===_,children:"Next »"},"next")),e})()})]})}function u(e,l=50){return e.replace(/<[^>]+>/g,"").split(/\s+/).slice(0,l).join(" ")+"..."}(0,e.registerBlockType)("lp/latest-posts",{title:"SKM Latest Posts",icon:"list-view",category:"widgets",attributes:{postType:{type:"string",default:"post"},totalPosts:{type:"number",default:3},postsPerPage:{type:"number",default:3},bgColor:{type:"string",default:""},bgSwitch:{type:"boolean",default:!1},bgImage:{type:"string",default:""},postStyle:{type:"string",default:"grid"},columns:{type:"number",default:3},scHedSwitch:{type:"boolean",default:!0},scHedFntSize:{type:"number",default:30},scHedFntColor:{type:"string",default:"#ffffffff"},scHedText:{type:"string",default:"Latest Posts"},scHedAlign:{type:"string",default:"left"}},edit:function({attributes:e,setAttributes:n}){const{postType:g,postsPerPage:u,totalPosts:x,bgColor:j,bgSwitch:b,bgImage:y,postStyle:_,columns:f,scHedSwitch:v,scHedText:C,scHedAlign:w,scHedFntSize:S,scHedFntColor:P}=e,k=(0,l.useSelect)(e=>e("core").getPostTypes({per_page:-1}),[]),[H,B]=(0,p.useState)(1),[N,T]=(0,p.useState)(!1);(0,p.useEffect)(()=>{B(1)},[u,x]);const{records:I,hasResolved:M}=(0,h.useEntityRecords)("postType",g||"post",{per_page:x,_embed:!0});return(0,r.jsxs)(p.Fragment,{children:[(0,r.jsxs)(t.InspectorControls,{children:[(0,r.jsxs)(s.PanelBody,{title:(0,c.__)("General","lp"),initialOpen:!0,children:[(0,r.jsx)(s.SelectControl,{label:(0,c.__)("Select Post Type","lp"),value:g,options:k?k.filter(e=>e.viewable&&!["page","media","attachment"].includes(e.slug)).map(e=>({label:e.name,value:e.slug})):[{label:(0,c.__)("Loading...","lp"),value:""}],onChange:e=>n({postType:e})}),(0,r.jsx)(s.RangeControl,{label:(0,c.__)("Total Posts to Load","lp"),value:x,onChange:e=>n({totalPosts:e}),min:1,max:100}),(0,r.jsx)(s.RangeControl,{label:(0,c.__)("Posts Per Page","lp"),value:u,onChange:e=>n({postsPerPage:e}),min:1,max:x})]}),(0,r.jsxs)(s.PanelBody,{title:(0,c.__)("Background Style","lp"),initialOpen:!1,children:[(0,r.jsx)(s.ToggleControl,{label:"Show Background Image",checked:b,onChange:e=>n({bgSwitch:e})}),!b&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{style:{marginBottom:"10px"},children:[(0,r.jsx)("h2",{style:{marginBottom:"5px"},children:"Background Color:"}),(0,r.jsx)("p",{style:{fontSize:"12px",marginBottom:"5px"},children:"Select a background color for the block. If you choose an image, this will be ignored."})]}),(0,r.jsx)(s.ColorPicker,{color:j,onChangeComplete:e=>n({bgColor:e.hex}),disableAlpha:!0})]}),b&&(0,r.jsx)(t.MediaUploadCheck,{children:(0,r.jsx)(t.MediaUpload,{onSelect:e=>n({bgImage:e.url}),allowedTypes:["image"],render:({open:e})=>(0,r.jsx)("div",{style:{marginBottom:"10px",width:"100%",textAlign:"center"},children:(0,r.jsx)(s.Button,{onClick:e,variant:"primary",style:{marginTop:"10px",backgroundColor:"rgb(235 82 67)",color:"#fff",borderRadius:"4px"},children:y?"Change Image":"Select Image"})})})})]}),(0,r.jsxs)(s.PanelBody,{title:(0,c.__)("Post Listing Style","lp"),initialOpen:!1,children:[(0,r.jsx)(s.SelectControl,{label:(0,c.__)("Select Layout Style","lp"),value:_,options:[{label:"Grid",value:"grid"},{label:"List",value:"list"},{label:"Masonry",value:"masonry"}],onChange:e=>n({postStyle:e}),help:(0,c.__)("Choose how posts should be displayed.","lp")}),("grid"===_||"masonry"===_)&&(0,r.jsx)(s.RangeControl,{label:(0,c.__)("Number of Columns","lp"),value:f,onChange:e=>n({columns:e}),min:1,max:6,help:(0,c.__)("Choose how many columns to show.","lp")})]}),(0,r.jsxs)(s.PanelBody,{title:(0,c.__)("Section Layout","lp"),initialOpen:!1,children:[(0,r.jsx)(s.ToggleControl,{label:"Show Section Heading",checked:v,onChange:e=>n({scHedSwitch:e})}),v&&(0,r.jsxs)(s.PanelBody,{title:(0,c.__)("Heading Style","lp"),initialOpen:v,children:[(0,r.jsx)(s.TextControl,{label:(0,c.__)("Header Text","lp"),value:C,onChange:e=>n({scHedText:e}),placeholder:(0,c.__)("Enter header text…","lp")}),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{style:{marginBottom:"10px"},children:(0,r.jsx)("h2",{style:{marginBottom:"5px"},children:"Heading Alignment:"})}),(0,r.jsxs)(s.ButtonGroup,{children:[(0,r.jsx)(s.Button,{isPressed:"left"===e.scHedAlign,onClick:()=>n({scHedAlign:"left"}),children:(0,r.jsx)(s.Icon,{icon:a})}),(0,r.jsx)(s.Button,{isPressed:"center"===e.scHedAlign,onClick:()=>n({scHedAlign:"center"}),children:(0,r.jsx)(s.Icon,{icon:o})}),(0,r.jsx)(s.Button,{isPressed:"right"===e.scHedAlign,onClick:()=>n({scHedAlign:"right"}),children:(0,r.jsx)(s.Icon,{icon:i})}),(0,r.jsx)(s.Button,{isPressed:"justify"===e.scHedAlign,onClick:()=>n({scHedAlign:"justify"}),children:(0,r.jsx)(s.Icon,{icon:d})})]})]}),(0,r.jsx)(s.__experimentalNumberControl,{label:(0,c.__)("Font Size","lp"),value:S,onChange:e=>n({scHedFntSize:e}),min:1,max:100,isShiftStepEnabled:!0,shiftStep:1}),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{style:{marginBottom:"10px"},children:[(0,r.jsx)("h2",{style:{marginBottom:"5px"},children:"Heading Color:"}),(0,r.jsx)("p",{style:{fontSize:"12px",marginBottom:"5px"},children:"Select a section heading color for the block."})]}),(0,r.jsx)(s.ColorPalette,{label:(0,c.__)("Text Color","lp"),value:P,onChange:e=>n({scHedFntColor:e}),colors:[{name:"Black",color:"#000000"},{name:"White",color:"#ffffff"},{name:"Red",color:"#ff0000"},{name:"Green",color:"#00ff00"},{name:"Blue",color:"#0000ff"}],__experimentalIsExpanded:N,onFocus:()=>T(!0),onBlur:()=>T(!1),__experimentalOnChange:e=>n({scHedFntColor:e}),__experimentalIsFullWidth:!0})]})]})]})]}),(0,r.jsx)(m,{attributes:e,allPosts:I,hasResolved:M,currentPage:H,setCurrentPage:B})]})},save:()=>null}),(0,e.registerBlockType)("lp/faq",{title:"SKM FAQ",icon:"list-view",category:"widgets",attributes:{faqTitle:{type:"string",default:"Frequently Asked Questions"},faqItems:{type:"array",default:[]},bgColor:{type:"string",default:""},bgSwitch:{type:"boolean",default:!1},bgImage:{type:"string",default:""}},edit:({attributes:e,setAttributes:n})=>{const{postType:a,postsPerPage:o,totalPosts:i,bgColor:d,bgSwitch:g,bgImage:m,postStyle:x,columns:j}=e,b=(0,l.useSelect)(e=>e("core").getPostTypes({per_page:-1}),[]),[y,_]=(0,p.useState)(1);(0,p.useEffect)(()=>{_(1)},[o,i]);const{records:f,hasResolved:v}=(0,h.useEntityRecords)("postType",a||"post",{per_page:i,_embed:!0}),C=f?.length||0,w=Math.ceil(C/o),S=f?.slice((y-1)*o,y*o)||[],P=g&&m?{backgroundImage:`url(${m})`,backgroundSize:"cover"}:{background:d},k=g&&m?{backgroundImage:`url(${m})`,backgroundSize:"cover",backgroundPosition:"center",height:"80px",marginBottom:"10px",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"12px"}:{display:"none"};return(0,r.jsxs)(p.Fragment,{children:[(0,r.jsxs)(t.InspectorControls,{children:[(0,r.jsxs)(s.PanelBody,{title:(0,c.__)("General","lp"),initialOpen:!0,children:[(0,r.jsx)(s.SelectControl,{label:(0,c.__)("Select Post Type","lp"),value:a,options:b?b.filter(e=>e.viewable&&!["page","media","attachment"].includes(e.slug)).map(e=>({label:e.name,value:e.slug})):[{label:(0,c.__)("Loading...","lp"),value:""}],onChange:e=>n({postType:e})}),(0,r.jsx)(s.RangeControl,{label:(0,c.__)("Total Posts to Load","lp"),value:i,onChange:e=>n({totalPosts:e}),min:1,max:100}),(0,r.jsx)(s.RangeControl,{label:(0,c.__)("Posts Per Page","lp"),value:o,onChange:e=>n({postsPerPage:e}),min:1,max:i})]}),(0,r.jsxs)(s.PanelBody,{title:(0,c.__)("Background Style","lp"),initialOpen:!1,children:[(0,r.jsx)(s.ToggleControl,{label:"Show Background Image",checked:g,onChange:e=>n({bgSwitch:e})}),!g&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{style:{marginBottom:"10px"},children:[(0,r.jsx)("h2",{style:{marginBottom:"5px"},children:"Background Color:"}),(0,r.jsx)("p",{style:{fontSize:"12px",marginBottom:"5px"},children:"Select a background color for the block. If you choose an image, this will be ignored."})]}),(0,r.jsx)(s.ColorPicker,{color:d,onChangeComplete:e=>n({bgColor:e.hex}),disableAlpha:!0})]}),(0,r.jsx)("div",{style:k,children:(0,c.__)("Background Preview","lp")}),g&&(0,r.jsx)(t.MediaUploadCheck,{children:(0,r.jsx)(t.MediaUpload,{onSelect:e=>n({bgImage:e.url}),allowedTypes:["image"],render:({open:e})=>(0,r.jsx)("div",{style:{marginBottom:"10px",width:"100%",textAlign:"center"},children:(0,r.jsx)(s.Button,{onClick:e,variant:"primary",style:{marginTop:"10px",backgroundColor:"rgb(235 82 67)",color:"#fff",borderRadius:"4px"},children:m?"Change Image":"Select Image"})})})})]}),(0,r.jsxs)(s.PanelBody,{title:(0,c.__)("Post Listing Style","lp"),initialOpen:!1,children:[(0,r.jsx)(s.SelectControl,{label:(0,c.__)("Select Layout Style","lp"),value:x,options:[{label:"Grid",value:"grid"},{label:"List",value:"list"},{label:"Masonry",value:"masonry"}],onChange:e=>n({postStyle:e}),help:(0,c.__)("Choose how posts should be displayed.","lp")}),("grid"===x||"masonry"===x)&&(0,r.jsx)(s.RangeControl,{label:(0,c.__)("Number of Columns","lp"),value:j,onChange:e=>n({columns:e}),min:1,max:6,help:(0,c.__)("Choose how many columns to show.","lp")})]})]}),(0,r.jsxs)("div",{className:"lp-preview",style:P,children:[(0,r.jsx)("h3",{children:(0,c.__)("Latest Posts","lp")}),"list"===x&&(0,r.jsx)("ul",{className:"lp-list",children:S.map(e=>{const l=e._embedded?.["wp:featuredmedia"]?.[0]?.source_url;return(0,r.jsxs)("li",{children:[l&&(0,r.jsx)("img",{src:l,alt:e.title.rendered}),(0,r.jsxs)("div",{className:"lp-post-content",children:[(0,r.jsx)("h4",{children:(0,r.jsx)("a",{href:e.link,children:e.title.rendered})}),(0,r.jsx)("div",{className:"excerpt",dangerouslySetInnerHTML:{__html:e?.excerpt?.rendered?.trim()?e.excerpt.rendered:u(e?.content?.rendered||"",50)}}),(0,r.jsx)("a",{href:e.link,className:"lp-read-more",children:(0,c.__)("Read More","lp")})]})]},e.id)})}),"grid"===x&&(0,r.jsx)("div",{className:"lp-grid",style:{padding:"10px",display:"grid",gap:"10px",gridTemplateColumns:`repeat(${j||3}, minmax(0, 1fr))`},children:S.map(e=>{const l=e._embedded?.["wp:featuredmedia"]?.[0]?.source_url;return(0,r.jsxs)("div",{id:e.id,className:"lp-grid-item",children:[l&&(0,r.jsx)("img",{src:l,alt:e.title.rendered}),(0,r.jsx)("h4",{children:e.title.rendered}),(0,r.jsx)("p",{dangerouslySetInnerHTML:{__html:e?.excerpt?.rendered?.trim()?e.excerpt.rendered:u(e?.content?.rendered||"",50)}}),(0,r.jsx)("a",{href:e.link,className:"lp-read-more",children:(0,c.__)("Read More","lp")})]},e.id)})}),"masonry"===x&&(0,r.jsx)("div",{className:"lp-masonry",style:{padding:"10px",columnCount:j||3,columnGap:"10px"},children:S.map(e=>{const l=e._embedded?.["wp:featuredmedia"]?.[0]?.source_url;return(0,r.jsxs)("div",{className:"lp-masonry-item",children:[l&&(0,r.jsx)("img",{src:l,alt:e.title.rendered}),(0,r.jsx)("h4",{children:e.title.rendered}),(0,r.jsx)("p",{dangerouslySetInnerHTML:{__html:e?.excerpt?.rendered?.trim()?e.excerpt.rendered:u(e?.content?.rendered||"",50)}}),(0,r.jsx)("a",{href:e.link,className:"lp-read-more",children:(0,c.__)("Read More","lp")})]},e.id)})}),v&&C>o&&(0,r.jsx)("div",{className:"lp-pagination",children:(()=>{const e=[],l=Math.max(1,y-2),t=Math.min(w,y+2);e.push((0,r.jsx)("button",{className:"lp-page-button nav",onClick:()=>_(y-1),disabled:1===y,children:"« Prev"},"prev")),l>1&&(e.push((0,r.jsx)("button",{className:"lp-page-button",onClick:()=>_(1),children:"1"},1)),l>2&&e.push((0,r.jsx)("span",{className:"lp-ellipsis",children:"..."},"start-ellipsis")));for(let s=l;s<=t;s++)e.push((0,r.jsx)("button",{className:"lp-page-button "+(s===y?"active":""),onClick:()=>_(s),children:s},s));return t<w-1&&e.push((0,r.jsx)("span",{className:"lp-ellipsis",children:"..."},"end-ellipsis")),t<w&&e.push((0,r.jsx)("button",{className:"lp-page-button",onClick:()=>_(w),children:w},w)),e.push((0,r.jsx)("button",{className:"lp-page-button nav",onClick:()=>_(y+1),disabled:y===w,children:"Next »"},"next")),e})()})]})]})},save:()=>null})})();